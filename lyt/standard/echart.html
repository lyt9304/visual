<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
		#main{
			height:1000px;
            width:1000px;
            background: url("sample.jpg");
            -moz-background-size:100% 100%;
            background-size:100% 100%;
            margin:0px;
            padding:0px;
		}
    </style>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main"></div>
    <input type="file" id="inputfile" name="inputfile">
    <button id="btn">读入资料</button>	

    <!-- ECharts单文件引入 -->
    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
	<script>
		//上传res.txt之后读取内容，利用JSON.parse来做对象的转换
		var dataMap;
		function btnHandler(){
			var file = document.getElementById("inputfile").files[0];  
			var fileReader = new FileReader();
	    	fileReader.readAsText(file);
	    	fileReader.onload=function(){
		    	var content=this.result;	        
		    	dataMap=JSON.parse(this.result);
		    	// console.log(dataMap);
		    	// 路径配置
        require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });

        // 使用
        require(
                [
                    'echarts',
                    'echarts/chart/heatmap', // 使用柱状图就加载bar模块，按需加载
                    'echarts/component/timeline'
                ],
                function (ec) {
                    // 基于准备好的dom，初始化echarts图表
                    var myChart = ec.init(document.getElementById('main'));

                    
					var option = {
						timeline:{
					        data:['Fri 09:00','Fri 10:00','Fri 11:00','Fri 12:00','Fri 13:00','Fri 14:00','Fri 15:00','Fri 16:00','Fri 17:00','Fri 18:00','Fri 19:00','Fri 20:00','Fri 21:00','Fri 22:00','Fri 23:00','Fri 24:00'],
					        label : {
					            formatter : function(s) {
					                return s;
					            }
					        },
					        type:'number',
					        autoPlay : true,
					        playInterval : 1000
					    },
					    options:[
					    	{
					    		title : {
					                'text':'游乐园人数分布热力图',
					                'subtext':'Fri 09:00'
					            },
							    series : [
							        {
							            type : 'heatmap',
							            // name:'heatmap',
							            data : dataMap[9],
							            hoverable : false,
							            // minAlpha: 0.5,
							            valueScale: 0.01,
							            opacity: 0.8
							        }
							    ]
					    	},
					    	{
					    		title : {'subtext':'Fri 10:00'},
					            series : [
					                {'data': dataMap[10]}
					            ]
					    	},
					    	{
					    		title : {'subtext':'Fri 11:00'},
					            series : [
					                {'data': dataMap[11]}
					            ]
					    	},
					    	{
					    		title : {'subtext':'Fri 12:00'},
					            series : [
					                {'data': dataMap[12]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 13:00'},
					            series : [
					                {'data': dataMap[13]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 14:00'},
					            series : [
					                {'data': dataMap[14]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 15:00'},
					            series : [
					                {'data': dataMap[15]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 16:00'},
					            series : [
					                {'data': dataMap[16]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 17:00'},
					            series : [
					                {'data': dataMap[17]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 18:00'},
					            series : [
					                {'data': dataMap[18]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 19:00'},
					            series : [
					                {'data': dataMap[19]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 20:00'},
					            series : [
					                {'data': dataMap[20]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 21:00'},
					            series : [
					                {'data': dataMap[21]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 22:00'},
					            series : [
					                {'data': dataMap[22]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 23:00'},
					            series : [
					                {'data': dataMap[23]}
					            ]
					    	}
					    	,
					    	{
					    		title : {'subtext':'Fri 24:00'},
					            series : [
					                {'data': dataMap[24]}
					            ]
					    	}
					    ]
					};
                    

                    // 为echarts对象加载数据
                    myChart.setOption(option);
                }
        );
		    }
		}
		var btn=document.getElementById("btn");
		btn.addEventListener("click",btnHandler,false);
		
	</script>
    <script type="text/javascript">
    	// 生成随机数据
   //  	function genData(){
   //  		var heatData = [];

			// for (var i = 0; i < 20; ++i) {
			//     heatData.push([
			// 	        400 + Math.random() * 300,
			// 	        5 + Math.random() * 10,
			// 	        Math.random()
			//     	]);
			// }
			// for (var i = 0; i < 100; ++i) {
			//     heatData.push([
			// 		        100 + Math.random() * 600,
			// 		        150 + Math.random() * 50,
			// 		        Math.random()
			// 		]);
			// }
			// for (var i = 0; i < 200; ++i) {
			//     heatData.push([
			// 	        Math.random() * 1000,
			// 	        Math.random() * 800,
			// 	        Math.random() * 0.5
			// 	   	]);
			// }
			// return heatData;
   //  	}


   //  	var dataMap={};

   //  	for(var i=9;i<13;i++){
   //  		dataMap[i]=genData();
   //  	}

   		

        
    </script>
</body>
</html>